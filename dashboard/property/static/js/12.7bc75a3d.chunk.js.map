{"version":3,"sources":["utils/RenderComponent.js","components/Table/index.js","helpers/Offer.js","components/SellerOfferList/ActionButtons.js","components/SellerOfferList/index.js","shared/Messages.js","containers/SellerOffer/OfferList/index.js"],"names":["hideIfInvalidProps","isValidProps","WrappedComponent","props","columns","data","isArray","length","dataMemo","useMemo","useTable","getTableProps","getTableBodyProps","headers","rows","prepareRow","className","map","header","getHeaderProps","key","restHeaderProps","render","row","getRowProps","restRowProps","cells","cell","getCellProps","restCellProps","getCounterData","offer","pathData","reduce","result","name","_get","concat","mappingCounterData","OFFER_STEPS","counteredBySeller","MappingCounter","ActionButtons","handleApproval","isSubmitting","handleDecline","useState","anchorEl","setAnchorEl","offerId","stepId","formId","counterOfferId","handleClose","isInvalidSubmission","STEPS_AWAITING_SELLER_ACTION","includes","counterUrl","APP_BASE_URL","type","onClick","event","currentTarget","disabled","Menu","keepMounted","open","Boolean","onClose","MenuItem","component","buyerAcceptCounterOffer","href","offers","memo","isLoading","mappingOffers","renderItem","value","Header","accessor","Cell","Loader","Table","OFFER_ERROR_MESSAGES","structuredSelector","createStructuredSelector","state","stepHaveBeenUpdated","error","mapDispatchToProps","fetchOffers","saveOfferStep","connect","withErrorBoundary","useEffect","message","toastr","a","new_step","paBeingCreated","sellerDecline"],"mappings":"wGACA,sDAEaA,EAAqB,SAChCC,GADgC,OAEnB,SAAAC,GAOb,OANsB,SAAAC,GACpB,OAAKF,EAAaE,GAEX,kBAACD,EAAqBC,GAFI,S,6GCgErBH,iBA1DG,SAAC,GAAD,IAAGI,EAAH,EAAGA,QAASC,EAAZ,EAAYA,KAAZ,OACjBC,IAAQF,IAAYA,EAAQG,QAAUD,IAAQD,IAASA,EAAKE,SAyD9CP,EAvDF,SAACG,GAAoC,IACzCC,EAAkBD,EAAlBC,QAASC,EAASF,EAATE,KAEXG,EAAWC,mBAAQ,kBAAMJ,IAAM,CAACA,IAHU,EAW5CK,mBAAS,CACXN,UACAC,KAAMG,IAPNG,EAN8C,EAM9CA,cACAC,EAP8C,EAO9CA,kBACAC,EAR8C,EAQ9CA,QACAC,EAT8C,EAS9CA,KACAC,EAV8C,EAU9CA,WAMF,OACE,2CAAWJ,IAAX,CAA4BK,UAAU,eACpC,+BACE,4BACGH,EAAQI,KAAI,SAAAC,GAAW,IAAD,EACeA,EAAOC,iBAAnCC,EADa,EACbA,IAAQC,EADK,uBAGrB,OACE,sCAAID,IAAKA,GAASC,GACfH,EAAOI,OAAO,gBAMzB,0BAAWV,IACRE,EAAKG,KAAI,SAAAM,GACRR,EAAWQ,GADI,MAEkBA,EAAIC,cAA7BJ,EAFO,EAEPA,IAAQK,EAFD,uBAIf,OACE,sCAAIL,IAAKA,GAASK,GACfF,EAAIG,MAAMT,KAAI,SAAAU,GAAS,IAAD,EACaA,EAAKC,eAA/BR,EADa,EACbA,IAAQS,EADK,uBAGrB,OACE,sCAAIT,IAAKA,GAASS,GACfF,EAAKL,OAAO,sB,sICtD3BQ,EAAiB,SAACC,EAAcC,GASpC,MARmB,CACjB,aACA,wBACA,wBACA,gBACA,aAGgBC,QAAO,SAACC,EAAgBC,GACxC,OAAO,2BACFD,GADL,kBAEGC,EAAOC,IAAKL,EAAOC,EAASK,OAAOF,QAErC,KAGQG,EAAqB,SAACP,GAGjC,OAFeK,IAAKL,EAAO,CAAC,aAEbQ,KAAYC,kBAClB,2BACFT,GADL,IAEEU,eAAgBX,EAAeC,EAAO,CAAC,eAAgB,oBAIpD,2BACFA,GADL,IAEEU,eAAgBX,EAAeC,EAAO,CAAC,eAAgB,qB,2JCd9CW,EAAgB,SAAC,GAKU,IAJtCX,EAIqC,EAJrCA,MACAY,EAGqC,EAHrCA,eACAC,EAEqC,EAFrCA,aACAC,EACqC,EADrCA,cACqC,EACLC,mBAAS,MADJ,mBAC9BC,EAD8B,KACpBC,EADoB,KAE/BC,EAAUb,IAAKL,EAAO,CAAC,YACvBmB,EAASd,IAAKL,EAAO,CAAC,WACtBoB,EAASf,IAAKL,EAAO,CAAC,eAAgB,QAAS,EAAG,WAClDqB,EAAiBhB,IACrBL,EACA,CAAC,eAAgB,kBACjBkB,GAMII,EAAc,WAClBL,EAAY,OAGRM,EACJV,IAAiBW,KAA6BC,SAASN,GAgBnDO,EAAU,UAAMC,IAAN,0BAAoCN,EAApC,iBAA2Db,KAAYC,kBAAvE,mBAAmGW,GAEnH,OACE,oCACE,4BACEQ,KAAK,SACL3C,UAAU,+BACV4C,QAhCc,SAAAC,GAClBb,EAAYa,EAAMC,gBAgCdC,SAAUT,GAEV,uBAAGtC,UAAU,sBAEf,kBAACgD,EAAA,EAAD,CACEjB,SAAUA,EACVkB,aAAW,EACXC,KAAMC,QAAQpB,GACdqB,QAASf,GAET,kBAACgB,EAAA,EAAD,CAAUC,UAAU,SAASV,QAhCJ,WACzBN,IAEJX,EAAeM,GACfI,OA4BI,UAGA,kBAACgB,EAAA,EAAD,CAAUC,UAAU,SAASV,QA5BL,WACxBN,IAEJT,EAAcI,GACdI,OAwBI,WAGCH,IAAWX,KAAYgC,yBACtB,kBAACF,EAAA,EAAD,CAAUC,UAAU,IAAIE,KAAMf,GAA9B,oB,oBCwBMzD,eA3FG,SAAC,GAAD,IAAGyE,EAAH,EAAGA,OAAH,OAAgBA,GAAUA,EAAOlE,SA2FpCP,CACd0E,gBA1FsB,SAACvE,GAAkC,IAEvDsE,EAKEtE,EALFsE,OACAE,EAIExE,EAJFwE,UACAhC,EAGExC,EAHFwC,eACAC,EAEEzC,EAFFyC,aACAC,EACE1C,EADF0C,cAGI+B,EAAgBH,EAAOxD,IAAIqB,KAE3BuC,EAAa,SAAC,GAAD,IAAGC,EAAH,EAAGA,MAAH,OAAe,8BAAOA,GAAS,MAW5C1E,EAAU,CACd,CACE2E,OAAQ,KACRC,SAAU,UACVC,KAAMJ,GAER,CACEE,OAAQ,cACRC,SAAU,4BACVC,KAAMJ,GAER,CACEE,OAAQ,UACRC,SAAU,uBACVC,KAAMJ,GAER,CACEE,OAAQ,YACRC,SAAU,mBACVC,KAAMJ,GAER,CACEE,OAAQ,eACRC,SAAU,sBACVC,KAAMJ,GAER,CACEE,OAAQ,4BACRC,SAAU,uCACVC,KAAMJ,GAER,CACEE,OAAQ,2BACRC,SAAU,uCACVC,KAAMJ,GAER,CACEE,OAAQ,iBACRC,SAAU,+BACVC,KAAMJ,GAER,CACEE,OAAQ,YACRC,SAAU,2BACVC,KAAMJ,GAER,CACEE,OAAQ,iBACRC,SAAU,uBACVC,KAAMJ,GAER,CACEE,OAAQ,UACRE,KA9DkB,SAAC,GAAD,IAAG1D,EAAH,EAAGA,IAAH,OACpB,kBAAC,EAAD,CACEQ,MAAOK,IAAKb,EAAK,CAAC,aAClBoB,eAAgBA,EAChBC,aAAcA,EACdC,cAAeA,OA6DnB,OACE,yBAAK7B,UAAU,eACb,yBAAKA,UAAU,mBACZ2D,GAAa,kBAACO,EAAA,EAAD,MACd,kBAACC,EAAA,EAAD,CAAO/E,QAASA,EAASC,KAAMuE,U,4CCvG1BQ,EACE,4BC0ETC,EAAqBC,YAAyB,CAClDb,OAAQ,SAAAc,GAAK,OAAInD,IAAKmD,EAAO,CAAC,eAAgB,OAAQ,EAAG,YACzDZ,UAAW,SAAAY,GAAK,OAAInD,IAAKmD,EAAO,CAAC,eAAgB,eACjD3C,aAAc,SAAA2C,GAAK,OAAInD,IAAKmD,EAAO,CAAC,cAAe,eACnDC,oBAAqB,SAAAD,GAAK,OACxBnD,IAAKmD,EAAO,CAAC,cAAe,yBAC9BE,MAAO,SAAAF,GAAK,OAAInD,IAAKmD,EAAO,CAAC,cAAe,aAGxCG,EAAqB,CACzBC,gBACAC,mBAGcC,4BACdR,EACAK,EAFcG,CAGdC,aAnEgB,SAAC3F,GAAwC,IAEvDwF,EAOExF,EAPFwF,YACAlB,EAMEtE,EANFsE,OACAE,EAKExE,EALFwE,UACAiB,EAIEzF,EAJFyF,cACAhD,EAGEzC,EAHFyC,aACA4C,EAEErF,EAFFqF,oBACAC,EACEtF,EADFsF,MAGFM,qBAAU,WACRJ,MAEC,IAEHI,qBAAU,WACJP,GACFG,MAGD,CAACH,IAEJO,qBAAU,WAAO,IACPC,GAAYP,GAAS,IAArBO,QAEJA,GACFC,SAAOR,MAAML,EAAkCY,KAEhD,CAACP,IAEJ,IAAM9C,EAAc,uCAAG,WAAMM,GAAN,SAAAiD,EAAA,sDACrBN,EAAc3C,EAAS,CAAEkD,SAAU5D,KAAY6D,iBAD1B,2CAAH,sDAQpB,OACE,kBAAC,EAAD,CACE3B,OAAQA,EACRE,UAAWA,EACXhC,eAAgBA,EAChBC,aAAcA,EACdC,cAVkB,SAAAI,GACpB2C,EAAc3C,EAAS,CAAEkD,SAAU5D,KAAY8D","file":"static/js/12.7bc75a3d.chunk.js","sourcesContent":["// @flow\nimport React from 'react';\n\nexport const hideIfInvalidProps = (\n  isValidProps: Function,\n): Function => WrappedComponent => {\n  const renderWrapped = props => {\n    if (!isValidProps(props)) return null;\n\n    return <WrappedComponent {...props} />;\n  };\n\n  return renderWrapped;\n};\n","// @flow\nimport React, { useMemo } from 'react';\nimport type { Element, AbstractComponent } from 'react';\nimport { useTable } from 'react-table';\nimport { hideIfInvalidProps } from 'utils/RenderComponent';\nimport isArray from 'lodash/isArray';\nimport './Style.css';\n\ntype Props = {\n  columns: Array<Object>,\n  data: Array<Object>,\n};\n\nconst checkProps = ({ columns, data }) =>\n  isArray(columns) && columns.length && isArray(data) && data.length;\n\nconst Table = (props: Props): Element<'table'> => {\n  const { columns, data } = props;\n\n  const dataMemo = useMemo(() => data, [data]);\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headers,\n    rows,\n    prepareRow,\n  } = useTable({\n    columns,\n    data: dataMemo,\n  });\n\n  return (\n    <table {...getTableProps()} className=\"nile-table\">\n      <thead>\n        <tr>\n          {headers.map(header => {\n            const { key, ...restHeaderProps } = header.getHeaderProps();\n\n            return (\n              <th key={key} {...restHeaderProps}>\n                {header.render('Header')}\n              </th>\n            );\n          })}\n        </tr>\n      </thead>\n      <tbody {...getTableBodyProps()}>\n        {rows.map(row => {\n          prepareRow(row);\n          const { key, ...restRowProps } = row.getRowProps();\n\n          return (\n            <tr key={key} {...restRowProps}>\n              {row.cells.map(cell => {\n                const { key, ...restCellProps } = cell.getCellProps();\n\n                return (\n                  <td key={key} {...restCellProps}>\n                    {cell.render('Cell')}\n                  </td>\n                );\n              })}\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nexport default (hideIfInvalidProps(checkProps)(Table): AbstractComponent<{}>);\n","// @flow\nimport _get from 'lodash/get';\nimport { OFFER_STEPS } from 'shared/Consts';\nimport type { Offer } from 'types/Offer';\n\nconst getCounterData = (offer: Offer, pathData: Array<string>): Object => {\n  const fieldNames = [\n    'OfferPrice',\n    'InspectionContingency',\n    'SaleOfHomeContingency',\n    'ClosingPeriod',\n    'Furniture',\n  ];\n\n  return fieldNames.reduce((result: Object, name: string) => {\n    return {\n      ...result,\n      [name]: _get(offer, pathData.concat(name)),\n    };\n  }, {});\n};\n\nexport const mappingCounterData = (offer: Offer): Object => {\n  const stepId = _get(offer, ['StepId']);\n\n  if (stepId === OFFER_STEPS.counteredBySeller) {\n    return {\n      ...offer,\n      MappingCounter: getCounterData(offer, ['CounterOffer', 'SellerCounter']),\n    };\n  }\n\n  return {\n    ...offer,\n    MappingCounter: getCounterData(offer, ['CounterOffer', 'BuyerCounter']),\n  };\n};\n","// @flow\nimport React, { useState, Fragment } from 'react';\nimport type { Element } from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport _get from 'lodash/get';\nimport {\n  APP_BASE_URL,\n  OFFER_STEPS,\n  STEPS_AWAITING_SELLER_ACTION,\n} from 'shared/Consts';\nimport type { Offer } from 'types/Offer';\n\ntype Props = {\n  offer: Offer,\n  handleApproval: Function,\n  isSubmitting: boolean,\n  handleDecline: Function,\n};\n\nexport const ActionButtons = ({\n  offer,\n  handleApproval,\n  isSubmitting,\n  handleDecline,\n}: Props): Element<typeof Fragment> => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const offerId = _get(offer, ['OfferId']);\n  const stepId = _get(offer, ['StepId']);\n  const formId = _get(offer, ['CounterOffer', 'Forms', 0, 'FormId']);\n  const counterOfferId = _get(\n    offer,\n    ['CounterOffer', 'CounterOfferId'],\n    offerId,\n  );\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const isInvalidSubmission =\n    isSubmitting || !STEPS_AWAITING_SELLER_ACTION.includes(stepId);\n\n  const onClickApprovalHandler = () => {\n    if (isInvalidSubmission) return;\n\n    handleApproval(offerId);\n    handleClose();\n  };\n\n  const onClickDeclineHandler = () => {\n    if (isInvalidSubmission) return;\n\n    handleDecline(offerId);\n    handleClose();\n  };\n\n  const counterUrl = `${APP_BASE_URL}/offer?offerId=${counterOfferId}&step=${OFFER_STEPS.counteredBySeller}&formId=${formId}`;\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        className=\"minimal-btn animated_fastest\"\n        onClick={handleClick}\n        disabled={isInvalidSubmission}\n      >\n        <i className=\"fa fa-ellipsis-h\"></i>\n      </button>\n      <Menu\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <MenuItem component=\"button\" onClick={onClickApprovalHandler}>\n          Accept\n        </MenuItem>\n        <MenuItem component=\"button\" onClick={onClickDeclineHandler}>\n          Decline\n        </MenuItem>\n        {stepId !== OFFER_STEPS.buyerAcceptCounterOffer && (\n          <MenuItem component=\"a\" href={counterUrl}>\n            Counter Offer\n          </MenuItem>\n        )}\n      </Menu>\n    </>\n  );\n};\n","// @flow\nimport React, { memo } from 'react';\nimport type { Element } from 'react';\nimport Table from 'components/Table';\nimport Loader from 'components/Loader';\nimport { ActionButtons } from './ActionButtons';\nimport { hideIfInvalidProps } from 'utils/RenderComponent';\nimport { mappingCounterData } from 'helpers/Offer';\nimport _get from 'lodash/get';\n\ntype Props = {\n  offers: Array<Object>,\n  isLoading: boolean,\n  handleApproval: Function,\n  isSubmitting: boolean,\n  handleDecline: Function,\n};\n\nconst checkProps = ({ offers }) => offers && offers.length;\n\nconst SellerOfferList = (props: Props): Element<'div'> => {\n  const {\n    offers,\n    isLoading,\n    handleApproval,\n    isSubmitting,\n    handleDecline,\n  } = props;\n\n  const mappingOffers = offers.map(mappingCounterData);\n\n  const renderItem = ({ value }) => <span>{value || '-'}</span>;\n\n  const renderActions = ({ row }) => (\n    <ActionButtons\n      offer={_get(row, ['original'])}\n      handleApproval={handleApproval}\n      isSubmitting={isSubmitting}\n      handleDecline={handleDecline}\n    />\n  );\n\n  const columns = [\n    {\n      Header: 'ID',\n      accessor: 'OfferNo',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Offer Price',\n      accessor: 'MappingCounter.OfferPrice',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Funding',\n      accessor: 'Funding.PurchaseType',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Loan Type',\n      accessor: 'Funding.LoanType',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Down Payment',\n      accessor: 'Funding.DownPayment',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Due Diligence Contingency',\n      accessor: 'MappingCounter.InspectionContingency',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Sale of Home Contingency',\n      accessor: 'MappingCounter.SaleOfHomeContingency',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Closing Period',\n      accessor: 'MappingCounter.ClosingPeriod',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Furniture',\n      accessor: 'MappingCounter.Furniture',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Current Status',\n      accessor: 'Step.messages.seller',\n      Cell: renderItem,\n    },\n    {\n      Header: 'Actions',\n      Cell: renderActions,\n    },\n  ];\n\n  return (\n    <div className=\"offer_block\">\n      <div className=\"offer_container\">\n        {isLoading && <Loader />}\n        <Table columns={columns} data={mappingOffers} />\n      </div>\n    </div>\n  );\n};\n\nexport default (hideIfInvalidProps(checkProps)(\n  memo(SellerOfferList),\n): typeof SellerOfferList);\n","export const OFFER_ERROR_MESSAGES = {\n  saveFailure: 'Failed to save offer data',\n};\n","// @flow\nimport React, { useEffect } from 'react';\nimport type { Element } from 'react';\nimport List from 'components/SellerOfferList';\nimport { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\nimport _get from 'lodash/get';\nimport { fetchOffers, saveOfferStep } from '../redux/Actions';\nimport { OFFER_STEPS } from 'shared/Consts';\nimport { withErrorBoundary } from 'components/ErrorBoundary';\nimport { toastr } from 'react-redux-toastr';\nimport { OFFER_ERROR_MESSAGES } from 'shared/Messages';\n\ntype PropsWithoutRedux = {};\n\ntype Props = {\n  fetchOffers: Function,\n  offers: Array<Object>,\n  isLoading: boolean,\n  saveOfferStep: Function,\n  isSubmitting: boolean,\n  stepHaveBeenUpdated: boolean,\n  error: Object,\n};\n\nconst OfferList = (props: Props): Element<typeof List> => {\n  const {\n    fetchOffers,\n    offers,\n    isLoading,\n    saveOfferStep,\n    isSubmitting,\n    stepHaveBeenUpdated,\n    error,\n  } = props;\n\n  useEffect(() => {\n    fetchOffers();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (stepHaveBeenUpdated) {\n      fetchOffers();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [stepHaveBeenUpdated]);\n\n  useEffect(() => {\n    const { message } = error || {};\n\n    if (message) {\n      toastr.error(OFFER_ERROR_MESSAGES.saveFailure, message);\n    }\n  }, [error]);\n\n  const handleApproval = async offerId => {\n    saveOfferStep(offerId, { new_step: OFFER_STEPS.paBeingCreated });\n  };\n\n  const handleDecline = offerId => {\n    saveOfferStep(offerId, { new_step: OFFER_STEPS.sellerDecline });\n  };\n\n  return (\n    <List\n      offers={offers}\n      isLoading={isLoading}\n      handleApproval={handleApproval}\n      isSubmitting={isSubmitting}\n      handleDecline={handleDecline}\n    />\n  );\n};\n\nconst structuredSelector = createStructuredSelector({\n  offers: state => _get(state, ['sellerOffers', 'list', 0, 'Offers']),\n  isLoading: state => _get(state, ['sellerOffers', 'isLoading']),\n  isSubmitting: state => _get(state, ['sellerOffer', 'isLoading']),\n  stepHaveBeenUpdated: state =>\n    _get(state, ['sellerOffer', 'stepHaveBeenUpdated']),\n  error: state => _get(state, ['sellerOffer', 'error']),\n});\n\nconst mapDispatchToProps = {\n  fetchOffers,\n  saveOfferStep,\n};\n\nexport default (connect(\n  structuredSelector,\n  mapDispatchToProps,\n)(withErrorBoundary(OfferList)): Element<PropsWithoutRedux>);\n"],"sourceRoot":""}